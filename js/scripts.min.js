const inittedInputs=[];function calcSize(t){const e=t/1024,s=e/1024;return s<1?`${parseInt(e)} кб`:s>=1?parseInt(100*s)/100+" мб":void 0}function findInittedInput(t,e=!1){const s=Array.from(document.querySelectorAll(t));if(e){return inittedInputs.filter(i)||null}return inittedInputs.find(i)||null;function i(t){return s.includes(t.rootElem)}}function createElement(t,e,s){let i=document.createElement(t);return e&&(i.className=e),s&&i.insertAdjacentHTML("afterbegin",s),i}class _LocalStorage{setItem(t,e){const s=JSON.stringify(e);localStorage.setItem(t,s)}getItem(t){const e=localStorage.getItem(t);return JSON.parse(e)}}const _localStorage=new _LocalStorage;class Cookie{constructor(t){this.onOkClick=this.onOkClick.bind(this),this.onLearnMoreClick=this.onLearnMoreClick.bind(this),this.rootElem=t,this.cookieKey="vsevn_ad_cookie",this.okButton=this.rootElem.querySelector(".cookie__button--ok"),this.learnMoreButton=this.rootElem.querySelector(".cookie__link--learn-more");const e=_localStorage.getItem(this.cookieKey);e&&"object"==typeof e&&e.accept&&this.removeModal(),this.okButton.addEventListener("click",this.onOkClick),this.learnMoreButton.addEventListener("click",this.onLearnMoreClick)}onOkClick(){this.removeModal();let t=_localStorage.getItem(this.cookieKey);t&&"object"==typeof t||(t={}),t.accept=!0,_localStorage.setItem(this.cookieKey,t)}removeModal(){this.rootElem.remove()}onLearnMoreClick(){}}class ChooseTabs{constructor(t){this.tabChange=this.tabChange.bind(this),this.rootElem=t,this.tabs=this.rootElem.querySelectorAll("[data-tab-name]"),this.tabs.forEach((t=>t.addEventListener("click",this.tabChange)))}tabChange(t){const e=t.currentTarget;this.tabs.forEach((t=>{t!==e&&t.classList.remove("active"),e.classList.add("active")}));let s=findInittedInput(".resume__rubricks");s.show();let i="";switch(e.dataset.tabName){case"tab-1":i="соискатель";default:break;case"tab-2":i="работодатель"}s.setStatus(i)}}class Rubricks{constructor(t){this.onChange=this.onChange.bind(this),this.rootElem=t,this.limit=3,this.statusSpan=this.rootElem.querySelector(".rubricks__status"),this.checkboxesItems=Array.from(this.rootElem.querySelectorAll(".checkboxs__items_item")),this.rootElem.addEventListener("change",this.onChange)}show(){this.rootElem.classList.remove("none")}onChange(t){const e=t.target;Array.isArray(this.checked)||(this.checked=[]);const s=findInittedInput("#options");function i(t){t?s.show():s.hide()}(function(){if(e.checked)if(this.checked.length<this.limit)this.checked.push(e);else{e.checked=!1;this.checked.slice(this.limit).forEach((t=>t.checked=!1)),this.checked=this.checked.slice(0,this.limit)}else this.checked=this.checked.filter((t=>t!==e))}).call(this),this.checked.length>0?i(!0):i(!1),s.setRubricks()}setStatus(t){this.statusSpan.innerHTML="",this.statusSpan.insertAdjacentText("afterbegin",t)}}class Options{constructor(t){this.rootElem=t}show(){this.rootElem.classList.remove("none")}hide(){this.rootElem.classList.add("none")}setRubricks(){const t=this.rootElem.querySelector(".rubricks-categories").querySelector("span"),e=findInittedInput(".resume__rubricks").checked||[];let s="";e.forEach(((t,e,i)=>{s+=t.value,e!=i.length-1&&(s+=", ")})),t.innerHTML=s}}let inittingSelectors=[{selector:".cookie",classInstance:Cookie},{selector:".resume__choose",classInstance:ChooseTabs},{selector:".resume__rubricks",classInstance:Rubricks},{selector:"#options",classInstance:Options}];function initInputs(){inittingSelectors.forEach((t=>{const e=t.selector,s=t.classInstance;Array.from(document.querySelectorAll(e)).filter((e=>!Boolean(inittedInputs.find((s=>s.rootElem===e&&s instanceof t.classInstance))))).forEach((t=>{inittedInputs.push(new s(t))}))}))}const inittingInputsBodyObserver=new MutationObserver((()=>{initInputs()}));inittingInputsBodyObserver.observe(document.body,{childList:!0,subtree:!0}),initInputs();class Input{constructor(t){this.onInput=this.onInput.bind(this),this.onFocus=this.onFocus.bind(this),this.onChange=this.onChange.bind(this),this.clear=this.clear.bind(this),this.onDocumentClick=this.onDocumentClick.bind(this),this.typeNumbersOnly=this.typeNumbersOnly.bind(this),this.rootElem=t,this.errorMessage=this.rootElem.querySelector(".work-error"),this.clearButton=this.rootElem.querySelector(".cross"),this.wrongValueMessageBlock=this.rootElem.querySelector(".text-input__wrong-value"),this.selectsTransitionDur=300,this.getSelectsWrap(),document.addEventListener("click",this.onDocumentClick),this.clearButton&&this.clearButton.addEventListener("click",this.clear)}initInput(){this.input.addEventListener("input",this.onInput),this.input.addEventListener("focus",this.onFocus),this.input.addEventListener("change",this.onChange),this.input.addEventListener("blur",this.onChange)}onInput(t){this.selectsWrap&&this.highlitMatches(),this.rootElem.classList.remove("__uncompleted"),this.checkCompletion(t)}onFocus(){this.openSelects()}onChange(){const t=this.input.value;if(this.maskData){this.getClearedFromMaskValue(t)||(this.input.value="")}this.rootElem.classList.remove("__wrong-value"),this.checkCompletion()}clear(){this.input.value="",this.input.dispatchEvent(new Event("input")),this.input.dispatchEvent(new Event("change"))}onDocumentClick(t){t.target!==this.input&&this.closeSelects()}typeNumbersOnly(t){const e=t.target,s=e.value;e.value=s.replace(/\D/g,"")}getSelectsWrap(){if(this.selectsWrap=this.rootElem.querySelector(".selects-wrap")||this.rootElem.querySelector(".selects-wrap-checkbox"),!this.selectsWrap)return;let t=".selects-wrap__option";return this.selectsWrap.classList.contains("selects-wrap-checkbox")&&(t=".selects-checkbox"),this.selectValues=Array.from(this.selectsWrap.querySelectorAll(t)),this.selectValues.length?void 0:(this.selectValues=null,void(this.selectsWrap=null))}getSelectsHeight(){const t=this.selectsWrap.cloneNode(!0),e=this.selectsWrap.parentNode.offsetWidth;t.querySelectorAll(".none").forEach((t=>t.classList.remove("none"))),t.style.cssText=`width: ${e}px; overflow: visible; max-height: unset; visibility: visible; position: absolute;`,document.body.append(t);const s=t.offsetHeight;return t.remove(),s}closeSelects(){this.selectsWrap&&(this.rootElem.classList.remove("open-selects"),this.selectsWrap.style.removeProperty("max-height"),this.selectsWrap.style.removeProperty("visibility"),this.selectsWrap.style.cssText="padding: 0; margin: 0;")}openSelects(){if(!this.selectsWrap)return;this.rootElem.classList.add("open-selects");const t=this.getSelectsHeight();setTimeout((()=>{this.selectsWrap.style.cssText=`max-height: ${t}px; visibility: visible;`,setTimeout((()=>{this.selectsWrap.style.removeProperty("transition")}),this.selectsTransitionDur)}),0)}highlitMatches(t=null){const e=this.input.value.toLowerCase().trim();!Boolean(this.selectValues.find((t=>t.text.includes(this.input.value))))&&!e.includes("выбрано")?this.selectsWrap.classList.add("none"):this.selectsWrap.classList.remove("none"),t||(t=this.selectValues.find((t=>t.text.toLowerCase().trim()===e))),t?this.selectValues.forEach((t=>{t.node.classList.remove("none"),this.setHighlightedText(t.text,t)})):this.selectValues.forEach((t=>{const s=t.text,i=s.toLowerCase().trim();if(i.includes(e)){t.node.classList.remove("none");const n=i.indexOf(e),o=n+e.length;let l=s.slice(0,n)+`<span class="highlight">${s.slice(n,o)}</span>`+s.slice(o);this.setHighlightedText(l,t)}else t.node.classList.add("none")}))}}class TextInput extends Input{constructor(t){if(super(t),this.onMaskInput=this.onMaskInput.bind(this),this.wrapInMask=this.wrapInMask.bind(this),this.input=this.rootElem.querySelector(".text-input__input"),this.mask=this.input.dataset.inputMask,this.completionMask=this.input.dataset.completionMask,this.isNumbersOnly=this.input.hasAttribute("data-numbers-only"),this.closeSelects(),this.getSelectsWrap(),this.initInput(),this.isNumbersOnly&&this.input.addEventListener("input",this.typeNumbersOnly),this.mask&&(this.createMask(),this.input.addEventListener("input",this.onMaskInput)),this.wrongValueMessageBlock){this.wrongValueMessageBlock.querySelector(".wrong-value__cross").addEventListener("click",(()=>{this.rootElem.classList.remove("__wrong-value")}))}}checkCompletion(t){const e=this.input.value;if(this.mask){const t=new RegExp(this.mask);this.isCompleted=Boolean(e.match(t))}if(this.completionMask){const t=new RegExp(this.completionMask);this.isCompleted=Boolean(e.match(t))}const s=!t||t&&"input"!==t.type;!this.isCompleted&&e?(s&&this.rootElem.classList.add("__uncompleted"),this.rootElem.classList.add("__wrong-value")):(s&&this.rootElem.classList.remove("__uncompleted"),this.rootElem.classList.remove("__wrong-value"))}getSelectsWrap(){super.getSelectsWrap(),this.selectValues&&(this.selectValues=this.selectValues.map((t=>({node:t,text:t.textContent||val.innerText}))),this.selectValues.forEach((t=>{t.node.addEventListener("click",(()=>{this.input.value=t.text,this.input.dispatchEvent(new Event("input"))}))})))}createMask(){new RegExp(this.mask);let t=this.mask.split(/(\s)/);1===t.length&&(t=this.mask.split(/(\.+)/));const e=t.map((t=>new RegExp(t))),s=t.map((t=>t.replace("\\",""))),i=s.join("");this.maskData={regexps:e,substrings:s,unspacedMask:i}}onMaskInput(t){if(t.inputType&&t.inputType.includes("deleteContent"))return;const e=this.input.value;if("insertFromPaste"===t.inputType)return void setTimeout((()=>{let t=this.getClearedFromMaskValue(e);this.isNumbersOnly&&(t=t.replace(/[^0-9+()\s-]/g,"")),this.wrapInMask(t)}),100);let s=0;for(let t=0;t<this.maskData.regexps.length;t++){const i=this.maskData.regexps[t],n=this.maskData.substrings[t].length,o=e.slice(s,s+n);if(s+=n,o&&!o.match(i)){let t=this.getClearedFromMaskValue(e);this.wrapInMask(t);break}}}getClearedFromMaskValue(t){return this.maskData.regexps.forEach(((e,s)=>{this.maskData.substrings[s].includes(".")||(t=t.replace(e,""))})),t}wrapInMask(t){let e=this.maskData.unspacedMask;t.split("").forEach((t=>e=e.replace(".",t)));const s=e.includes(".")?e.indexOf("."):null;s&&(e=e.slice(0,s)),this.input.value=e.replace("\\","")}setHighlightedText(t,e){e.node.innerHTML=t}}class TextInputPhone extends TextInput{constructor(t){super(t),this.mask="\\+7 \\( ... \\) ... - .. - ..",this.createMask(),this.input.addEventListener("focus",this.onMaskInput),this.input.addEventListener("input",this.onMaskInput)}typeNumbersOnly(t){const e=t.target,s=e.value;e.value=s.replace(/[^0-9+()\s-]/g,"");const i=s.lastIndexOf("+");i>0&&(e.value=e.value.slice(0,i)+e.value.slice(i+1))}onMaskInput(t){"focus"!==t.type||this.input.value||(this.input.value="+7 ("),t.inputType&&t.inputType.includes("deleteContent")&&this.mask.startsWith("8")&&this.input.value.length<=5&&(this.input.value="");let e=this.input.value;let s=this.mask.match(/\s/)?6:4;const i=e.endsWith("8")&&e.length<=s||e.startsWith("8"),n=e.startsWith("+7")&&!this.mask.includes("+7")||!e;i&&this.mask.includes("+7")?(this.mask="8 800 ... - .. - ..",this.createMask(),this.input.setAttribute("maxlength","19"),this.input.value.includes("+7")&&(this.input.value=this.input.value.replace("+7","").replace("(","").replace(")",""))):(n||this.mask.startsWith("8")&&t.inputType&&t.inputType.includes("deleteContent"))&&(this.mask="\\+7 \\( ... \\) ... - .. - ..",this.createMask(),this.input.setAttribute("maxlength","24")),super.onMaskInput(t),(this.mask.includes("+7")&&"7"==e[5]||"7"==e[4])&&(this.input.value=this.input.value.slice(0,5)+this.input.value.slice(6))}}class TextInputCheckboxes extends Input{constructor(t){super(t),this.apply=this.apply.bind(this),this.input=this.rootElem.querySelector(".selects-input-checkbox__input"),this.ariaLabel=this.input.getAttribute("aria-label")||"",this.applyButton=this.rootElem.querySelector(".selects-wrap-checkbox__button"),this.checkboxesBlock=this.rootElem.querySelector(".selects-wrap-checkbox"),this.checkboxes=Array.from(this.checkboxesBlock.querySelectorAll(".selects-checkbox")),this.checked=[],this.closeSelects(),this.initInput(),this.applyButton.addEventListener("click",this.apply)}checkCompletion(){}apply(){this.checked=this.checkboxes.filter((t=>t.checked)),this.checked.length<1&&(this.input.value=""),1===this.checked.length&&(this.input.value=this.checked[0].value),this.checked.length>1&&(this.input.value=this.ariaLabel+" (выбрано: "+this.checked.length+")"),this.input.dispatchEvent(new Event("change")),this.input.dispatchEvent(new Event("input")),this.closeSelects()}onDocumentClick(t){t.target===this.input||t.target===this.checkboxesBlock||t.target.closest(".selects-wrap-checkbox")||this.closeSelects()}getSelectsWrap(){super.getSelectsWrap(),this.selectValues&&(this.selectValues=this.selectValues.map((t=>({node:t.closest("label"),text:t.value,textNode:t.closest("label").querySelector(".text")}))))}closeSelects(){super.closeSelects(),this.checkboxes.forEach((t=>{const e=this.checked.includes(t);t.checked=!!e}))}clear(){super.clear(),this.checkboxes.forEach((t=>t.checked=!1)),this.apply()}highlitMatches(){const t=this.input.value.includes("выбрано");super.highlitMatches(t)}setHighlightedText(t,e){e.textNode.innerHTML=t}}class AddFieldButton{constructor(t){this.onClick=this.onClick.bind(this),this.rootElem=t,this.addData=this.rootElem.dataset.addField.split(", "),this.selector=this.addData[0];const e=parseInt(this.addData[1]);this.maxFieldsAmount=e>0?e:1,this.cloneRef=document.querySelector(this.selector),this.cloneRef.closest(".selects-item")&&(this.cloneRef=this.cloneRef.closest(".selects-item")),this.counter=2,this.addedFields=[],this.rootElem.addEventListener("click",this.onClick)}onClick(){this.addField()}addField(){if(this.addedFields.length>this.maxFieldsAmount)return;const t=this.cloneRef.cloneNode(!0);this.replaceUniqueAttributes(t);const e=this.createRemoveButton();t.append(e),this.rootElem.before(t),this.addedFields.push(t),e.addEventListener("click",(()=>this.removeField(t))),this.addedFields.length>=this.maxFieldsAmount&&this.rootElem.classList.add("none")}replaceUniqueAttributes(t,e=!1){function s(t,s){const i=t.getAttribute(s);if(!i)return;let n;if(e){let t=i.match(/\d+\b/);if(!t)return;const e=i.indexOf(t);if(t=parseInt(t[0]),t<=0||t==1/0)return;let s=t-1;n=i.slice(0,e)+s.toString()}else n=i.trim().replace(/\d\b/,"").replace(/\-\b/,"")+"-"+this.counter.toString();t.setAttribute(s,n)}s=s.bind(this),t.querySelectorAll("[name]").forEach((t=>s(t,"name"))),t.querySelectorAll("[id]").forEach((t=>s(t,"id"))),t.querySelectorAll("label[for]").forEach((t=>s(t,"for"))),this.counter++}createRemoveButton(){const t=createElement("button","add__button remove first-minus remove-field",'\n            <span class="add__plus-wrap mr-10"> \n                <span class="add__plus">_</span>\n            </span>\n            <span class="add__text">Удалить</span>\n        ');return t.setAttribute("type","button"),t}removeField(t){const e=this.addedFields.indexOf(t);this.addedFields.filter(((t,s)=>s>e)).forEach((t=>this.replaceUniqueAttributes(t,!0))),this.addedFields.splice(e,1),t.remove(),this.counter--,this.addedFields.length<this.maxFieldsAmount&&this.rootElem.classList.remove("none")}}class AddFieldByInput{constructor(t){this.onChange=this.onChange.bind(this),this.rootElem=t;const e=this.rootElem.dataset.addfieldInput,s=this.rootElem.getAttribute("name"),i=Array.from(document.querySelectorAll(`[data-addfield-input-target="${e}"]`));this.creatingElems=i.map((t=>({elem:t,anchor:createElement("div","none")}))),this.otherInputs=document.querySelectorAll(`input[name="${s}"]`),this.onChange(),this.otherInputs.forEach((t=>t.addEventListener("change",this.onChange)))}onChange(){this.rootElem.checked?this.add():this.remove()}remove(){this.creatingElems.forEach((t=>{t.elem.replaceWith(t.anchor)}))}add(){this.creatingElems.forEach((t=>{t.anchor.replaceWith(t.elem)}))}}class AddPhoto{constructor(t){this.onChange=this.onChange.bind(this),this.rootElem=t,this.input=this.rootElem.querySelector(".add-photo__input"),this.addPhotoWrapper=this.rootElem.querySelector(".add-photo__wrapper"),this.infoBlock=this.rootElem.querySelector(".add-photo__info"),this.button=this.rootElem.querySelector(".add-photo__button"),this.images=[],this.input.addEventListener("change",this.onChange)}onChange(){const t=this.input.files;for(let e=0;e<t.length;e++){const s=t[e];if(!s.type.startsWith("image/"))return;const i=calcSize(s.size);if(i.includes("мб")&&i>5)return;const n=new Image;n.onload=()=>{const t=createElement("div","add-photo__loaded-image"),s=createElement("div","add-photo__loaded-image-cross",'<svg><use xlink:href="#cross-icon"></use></svg>');s.addEventListener("click",(()=>this.removeImage(e))),t.append(n),t.append(s),this.images.push({img:n,fileIndex:e,imgWrapper:t}),this.appendImages()};const o=new FileReader;o.onload=t=>{n.src=t.target.result},o.readAsDataURL(s)}}appendImages(){this.toggleButton(),this.images.forEach((t=>{t.imgWrapper.closest("body")||this.addPhotoWrapper.append(t.imgWrapper)}))}toggleButton(){this.images.length>0?(this.infoBlock.classList.add("none"),this.button.classList.add("none")):(this.infoBlock.classList.remove("none"),this.button.classList.remove("none"))}removeImage(t){(function(){const e=this.images.find((e=>e.fileIndex==t));this.images=this.images.filter((t=>t!==e)),e.imgWrapper.remove()}).call(this),function(){const e=new DataTransfer,s=this.input.files;for(let i=0;i<s.length;i++){const n=s[i];i!==t&&e.items.add(n)}this.input.files=e.files}.call(this),this.toggleButton()}}let inputsInittingSelectors=[{selector:".text-input--standard",classInstance:TextInput},{selector:".text-input--phone",classInstance:TextInputPhone},{selector:"[data-add-field]",classInstance:AddFieldButton},{selector:"[data-addfield-input]",classInstance:AddFieldByInput},{selector:".selects-input-checkbox",classInstance:TextInputCheckboxes},{selector:".add-photo",classInstance:AddPhoto}];inittingSelectors=inittingSelectors.concat(inputsInittingSelectors);